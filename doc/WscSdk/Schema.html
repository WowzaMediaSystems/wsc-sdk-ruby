<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Wowza Streaming Cloud - SDK Code Documentation</title>

  <link rel="stylesheet" href="../css/style.css" type="text/css" charset="utf-8" />

  <link rel="stylesheet" href="../css/common.css" type="text/css" charset="utf-8" />

  <link rel="stylesheet" href="../css/custom.css" type="text/css" charset="utf-8" />

<script type="text/javascript" charset="utf-8">
  pathId = "WscSdk::Schema";
  relpath = '../';
</script>


  <script type="text/javascript" charset="utf-8" src="../js/jquery.js"></script>

  <script type="text/javascript" charset="utf-8" src="../js/app.js"></script>


  </head>
  <body>
    <div id="wowza-wrapper">
      <header>
        <div class="logo">
          <a href="https://www.wowza.com">
            <img src="https://cloud.wowza.com/apidocs/assets/logo.png" alt="Wowza Logo" />
          </a>
          <h1>Wowza Streaming Cloud<br/>SDK Code Documentation</h1>
          <div class="clearfix"></div>
        </div>
        <div class="links">
          <a href="https://www.wowza.com/">Wowza Home</a>
          <a href="https://www.wowza.com/docs">Docs & APIS</a>
          <a href="https://www.wowza.com/community/index.html">Forums</a>
          <a href="https://www.wowza.com/support">Support</a>
        </div>
        <div class="clearfix"></div>
      </header>

      <div id="content">
        <div class="nav_wrap">
          <iframe id="nav" src="../class_list.html?1"></iframe>
          <div id="resizer"></div>
        </div>

        <div id="main" tabindex="-1">
          <div id="header">
            <div id="menu">
  
    <a href="../_index.html">Index (S)</a> &raquo;
    <span class='title'><span class='object_link'><a href="../WscSdk.html" title="WscSdk (module)">WscSdk</a></span></span>
     &raquo; 
    <span class="title">Schema</span>
  
</div>

            <div id="search">
  
    <a class="full_list_link" id="class_list_link"
        href="../class_list.html">

        <svg width="24" height="24">
          <rect x="0" y="4" width="24" height="4" rx="1" ry="1"></rect>
          <rect x="0" y="12" width="24" height="4" rx="1" ry="1"></rect>
          <rect x="0" y="20" width="24" height="4" rx="1" ry="1"></rect>
        </svg>
    </a>
  
</div>
            <div class="clear"></div>
          </div>

          <div id="content"><h1>Class: WscSdk::Schema
  
  
  
</h1>
<div class="box_info">
  
  <dl>
    <dt>Inherits:</dt>
    <dd>
      <span class="inheritName">Hash</span>
      
        <ul class="fullTree">
          <li>Object</li>
          
            <li class="next">Hash</li>
          
            <li class="next">WscSdk::Schema</li>
          
        </ul>
        <a href="#" class="inheritanceTree">show all</a>
      
    </dd>
  </dl>
  

  
  
  
  
  

  

  
  <dl>
    <dt>Defined in:</dt>
    <dd>lib/wsc_sdk/schema.rb</dd>
  </dl>
  
</div>

<h2>Overview</h2><div class="docstring">
  <div class="discussion">
    
<p>A class that manages the data schema for an SDK model.</p>


  </div>
</div>
<div class="tags">
  

</div>






  
    <h2>
      Instance Method Summary
      <small><a href="#" class="summary_toggle">collapse</a></small>
    </h2>

    <ul class="summary">
      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#add_attribute-instance_method" title="#add_attribute (instance method)">#<strong>add_attribute</strong>(name, type, options = {})  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Adds an attribute to the schema.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#defaults-instance_method" title="#defaults (instance method)">#<strong>defaults</strong>(model)  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Generates a hash of default values for the given model.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#has_attribute%3F-instance_method" title="#has_attribute? (instance method)">#<strong>has_attribute?</strong>(attribute)  &#x21d2; Boolean </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Determine if the schema has an attribute.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#transform_value-instance_method" title="#transform_value (instance method)">#<strong>transform_value</strong>(attribute, model, value)  &#x21d2; Any </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Transforms a value into the appropriate type.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#valid_type%3F-instance_method" title="#valid_type? (instance method)">#<strong>valid_type?</strong>(attribute, value)  &#x21d2; Boolean </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Determines if the value is a valid type for the attribute.</p>
</div></span>
  
</li>

      
    </ul>
  


  

  <div id="instance_method_details" class="method_details_list">
    <h2>Instance Method Details</h2>

    
      <div class="method_details first">
  <h3 class="signature first" id="add_attribute-instance_method">
  
    #<strong>add_attribute</strong>(name, type, options = {})  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Adds an attribute to the schema</p>


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>name</span>
      
      
        <span class='type'>(<tt>Symbol</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>The name of the attribute.</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>type</span>
      
      
        <span class='type'>(<tt>Symbol</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>The type of the attribute.  The type must be in the list of
WscSdk::SchemaAttribute::TYPES</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>options</span>
      
      
        <span class='type'>(<tt>Hash</tt>)</span>
      
      
        <em class="default">(defaults to: <tt>{}</tt>)</em>
      
      
        &mdash;
        <div class='inline'>
<p>A hash of options</p>
</div>
      
    </li>
  
</ul>

  
    
    
    
    
    
    
    <p class="tag_title">Options Hash (<tt>options</tt>):</p>
    <ul class="option">
      
        <li>
          <span class="name">:default</span>
          <span class="type">(<tt>Any</tt>, <tt>Proc</tt>, <tt>Symbol</tt>)</span>
          <span class="default">
            
          </span>
          
            &mdash; <div class='inline'>
<p>The default value of the attribute.  This value must match the assigned
type of the attribute.  The default value can be determined by a direct
value, a Proc or a Symbol that represents a method in the model.</p>

<p>If a <strong>Proc</strong> is provided it will be passed an instance of the
model, which can be used to determine the default value for the attribute. 
The Proc should return a value that is the same type as the attribute.</p>

<p>If a <strong>Symbol</strong> is provided, the Symbol will be checked
against the model to determine if there is a method available that has the
same name.  If one exists, that method will be passed an instance of the
model, which can be used to determine the default value for the attribute. 
The method should return a value that is the same type as the attribute. If
no method is found that matches the symbol, the symbol itself is used as
the default.</p>
</div>
          
        </li>
      
        <li>
          <span class="name">:required</span>
          <span class="type">(<tt>Array</tt>, <tt>Proc</tt>, <tt>Symbol</tt>)</span>
          <span class="default">
            
          </span>
          
            &mdash; <div class='inline'>
<p>Determines if the attribute is required.</p>

<p>If a <strong>Proc</strong> is provided it will be passed an instance of the
model, which can be used to determine if the value is required.  The Proc
should return a boolean value.</p>

<p>If a <strong>Symbol</strong> is provided, the Symbol will be checked
against the model to determine if there is a method available that has the
same name.  If one exists, that method will be called.  The method should
return a boolean value.</p>
</div>
          
        </li>
      
        <li>
          <span class="name">:validate</span>
          <span class="type">(<tt>Array</tt>, <tt>Proc</tt>, <tt>Symbol</tt>)</span>
          <span class="default">
            
          </span>
          
            &mdash; <div class='inline'>
<p>Determines if the attribute is valid.</p>

<p>If a <strong>Proc</strong> is provided it will be passed an instance of the
model, which can be used to determine if the value is valid.  The Proc
should return a string describing why the attribute is not valid, otherwise
it should return nil.</p>

<p>If a <strong>Symbol</strong> is provided, the Symbol will be checked
against the model to determine if there is a method available that has the
same name.  If one exists, that method will be passed an instance of the
model, which can be used to determine if the value is valid.  The Proc
should return a string describing why the attribute is not valid, otherwise
it should return nil.</p>
</div>
          
        </li>
      
    </ul>
  

<p class="tag_title">Raises:</p>
<ul class="raise">
  
    <li>
      
      
        <span class='type'>(<tt>ArgumentError</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>If the type is not in the WscSdk::SchemaAttribute::TYPES list.</p>
</div>
      
    </li>
  
    <li>
      
      
        <span class='type'>(<tt>IndexError</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>If the attribute name is already defined in the schema.</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


73
74
75
76
77</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/wsc_sdk/schema.rb', line 73</span>

<span style="color:#080;font-weight:bold">def</span> <span style="color:#06B;font-weight:bold">add_attribute</span>(name, type, options={})
  name = name.to_sym
  raise <span style="color:#036;font-weight:bold">IndexError</span>.new(<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">The attribute `</span><span style="background-color:hsla(0,0%,0%,0.07);color:black"><span style="font-weight:bold;color:#666">#{</span>name<span style="font-weight:bold;color:#666">}</span></span><span style="color:#D20">` is already defined in the schema</span><span style="color:#710">&quot;</span></span>) <span style="color:#080;font-weight:bold">if</span> has_key?(name)
  <span style="color:#069">self</span>[name] = <span style="color:#036;font-weight:bold">SchemaAttribute</span>.new(name, type, options)
<span style="color:#080;font-weight:bold">end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="defaults-instance_method">
  
    #<strong>defaults</strong>(model)  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Generates a hash of default values for the given model.</p>

<p>This is a non-destructive process, so if the attributes are already
established and have values, then nothing will happen to them.</p>


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>model</span>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="Model.html" title="WscSdk::Model (class)">WscSdk::Model</a></span></tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>The model to use to determine the default values in the event that they are
defined as a Proc or a Symbol.</p>
</div>
      
    </li>
  
</ul>


</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


132
133
134
135
136
137
138</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/wsc_sdk/schema.rb', line 132</span>

<span style="color:#080;font-weight:bold">def</span> <span style="color:#06B;font-weight:bold">defaults</span>(model)
  hsh = {}
  each <span style="color:#080;font-weight:bold">do</span> |name, attribute|
    hsh[name] = attribute.default_value(model)
  <span style="color:#080;font-weight:bold">end</span>
  hsh
<span style="color:#080;font-weight:bold">end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="has_attribute?-instance_method">
  
    #<strong>has_attribute?</strong>(attribute)  &#x21d2; <tt>Boolean</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Determine if the schema has an attribute</p>


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>attribute</span>
      
      
        <span class='type'>(<tt>Symbol</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>The name of the attribute</p>
</div>
      
    </li>
  
</ul>

<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Boolean</tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


119
120
121</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/wsc_sdk/schema.rb', line 119</span>

<span style="color:#080;font-weight:bold">def</span> <span style="color:#06B;font-weight:bold">has_attribute?</span>(attribute)
  has_key?(attribute)
<span style="color:#080;font-weight:bold">end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="transform_value-instance_method">
  
    #<strong>transform_value</strong>(attribute, model, value)  &#x21d2; <tt>Any</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Transforms a value into the appropriate type.</p>


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>attribute</span>
      
      
        <span class='type'>(<tt>Symbol</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>The attribute to validate the value for.</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>model</span>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="Model.html" title="WscSdk::Model (class)">WscSdk::Model</a></span></tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>The model to transform the value for.</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>value</span>
      
      
        <span class='type'>(<tt>Any</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>The value to validate</p>
</div>
      
    </li>
  
</ul>

<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Any</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>The transformed value.</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


109
110
111
112</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/wsc_sdk/schema.rb', line 109</span>

<span style="color:#080;font-weight:bold">def</span> <span style="color:#06B;font-weight:bold">transform_value</span>(attribute, model, value)
  <span style="color:#080;font-weight:bold">return</span> <span style="color:#069">nil</span> <span style="color:#080;font-weight:bold">unless</span> has_attribute?(attribute)
  <span style="color:#069">self</span>[attribute].transform_value(model, value)
<span style="color:#080;font-weight:bold">end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="valid_type?-instance_method">
  
    #<strong>valid_type?</strong>(attribute, value)  &#x21d2; <tt>Boolean</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Determines if the value is a valid type for the attribute.</p>


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>attribute</span>
      
      
        <span class='type'>(<tt>Symbol</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>The attribute to validate the value for.</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>value</span>
      
      
        <span class='type'>(<tt>Any</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>The value to validate</p>
</div>
      
    </li>
  
</ul>

<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Boolean</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>An indication if the value is valid.</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


90
91
92
93</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/wsc_sdk/schema.rb', line 90</span>

<span style="color:#080;font-weight:bold">def</span> <span style="color:#06B;font-weight:bold">valid_type?</span>(attribute, value)
  <span style="color:#080;font-weight:bold">return</span> <span style="color:#069">false</span> <span style="color:#080;font-weight:bold">unless</span> has_attribute?(attribute)
  <span style="color:#069">self</span>[attribute].valid_type?(value)
<span style="color:#080;font-weight:bold">end</span></pre>
    </td>
  </tr>
</table>
</div>
    
  </div>

</div>

          
        </div>
      </div>
    </div>
  </body>
</html>
